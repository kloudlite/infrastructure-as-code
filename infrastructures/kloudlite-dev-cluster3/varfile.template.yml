tracker_id: "example-cluster"

aws_region: ap-south-1
aws_access_key: ${AWS_ACCESS_KEY_ID}
aws_secret_key: ${AWS_SECRET_ACCESS_KEY}

# aws_assume_role:
#   enabled: true
#   role_arn: "arn:aws:iam::855999427630:role/kloudlite-access-role"
#   external_id: "sample"

k3s_masters:
  image_id: ami-06d146e85d1709abb
  image_ssh_username: ubuntu
  instance_type: "c6a.large"
  nvidia_gpu_enabled: false
  root_volume_type: gp3
  root_volume_size: 50
  iam_instance_profile: "kloudlite-instance-profile"

  public_dns_host: dev3.kloudlite.io
  cluster_internal_dns_host: example-cluster.kloudlite-platform.kloudlite.local

  cloudflare:
    enabled: true
    api_token: ${CLOUDFLARE_API_TOKEN}
    zone_id: ${CLOUDFLARE_ZONE_ID}
    domain: dev3.kloudlite.io

  taint_master_nodes: true

  backup_to_s3:
    enabled: false

  nodes:
    master-1:
      role: primary-master
      availability_zone: ap-south-1a
      # last_recreated_at: 0
    # master-2:
    #   role: secondary-master
    #   availability_zone: ap-south-1b
    #   # last_recreated_at: 0

# ec2_nodepools:
#   np-1:
#     image_id: ami-06d146e85d1709abb
#     image_ssh_username: ubuntu
#     availability_zone: "ap-south-1a"
#     instance_type: "c6a.large"
#     nvidia_gpu_enabled: false
#     root_volume_type: gp3
#     root_volume_size: 50
#     iam_instance_profile: "kloudlite-instance-profile"
#     nodes:
#       node-1: { }

ec2_nodepools: {}
spot_nodepools:
  spot-np-1:
    image_id: ami-0fdcdf796bf63edfd
    image_ssh_username: ubuntu
    availability_zone: "ap-south-1b"
    nvidia_gpu_enabled: false
    root_volume_type: gp3
    root_volume_size: 80
    # iam_instance_profile: "kloudlite-instance-profile"
    spot_fleet_tagging_role_name: "aws-ec2-spot-fleet-tagging-role"
    gpu_node:
      instance_types: ["g5.xlarge"]
    # cpu_node:
    #   vcpu:
    #     min: 1
    #     max: 2
    #   memory_per_vcpu:
    #     min: 2
    #     max: 4
    nodes:
      node-1: { }

enable_nvidia_gpu_support: false
kloudlite_params:
  release: v1.0.5-nightly
  install_agent: true
  agent_vars:
      account_name: "sample"
      cluster_name: "sample"
      cluster_token:  "safsdff"
      message_office_grpc_addr: "asdasdf"
  install_crds: true
  install_csi_driver: true
  install_operators: true

extra_server_args:
  - --snapshotter
  - "stargz"
extra_agent_args:
  - --snapshotter
  - "stargz"

save_ssh_key_to_path: .secrets/${TRACKER_ID}.pem
save_kubeconfig_to_path: .secrets/${TRACKER_ID}.kubeconfig

save_worker_ssh_key_to_path: .secrets/${TRACKER_ID}-worker.pem
