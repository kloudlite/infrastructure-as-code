tracker_id: "boltzmann-cluster"

aws_region: us-east-1
aws_access_key: ${AWS_ACCESS_KEY_ID}
aws_secret_key: ${AWS_SECRET_ACCESS_KEY}
aws_assume_role: null

k3s_masters:
  ami: ami-0f5994b4c9f02fea1
  ami_ssh_username: ubuntu
  instance_type: "c6a.large"
  nvidia_gpu_enabled: false
  root_volume_type: gp3
  root_volume_size: 50
  iam_instance_profile: ""

  public_dns_host: test-boltzmann.kloudlite.io
  # cluster_internal_dns_host: test-cluster.boltzmann.kloudlite.local
  cluster_internal_dns_host: cluster.local

  cloudflare:
    enabled: true
    api_token: ${CLOUDFLARE_API_TOKEN}
    zone_id: ${CLOUDFLARE_ZONE_ID}
    domain: test-boltzmann.kloudlite.io

  taint_master_nodes: true

  backup_to_s3:
    enabled: false

  nodes:
    master-1:
      role: primary-master
      availability_zone: us-east-1a

ec2_nodepools: { }
  # np-1:
  #   ami: ami-0f5994b4c9f02fea1
  #   ami_ssh_username: ubuntu
  #   availability_zone: "us-east-1a"
  #   instance_type: "c6a.large"
  #   nvidia_gpu_enabled: false
  #   root_volume_type: gp3
  #   root_volume_size: 50
  #   iam_instance_profile: ""
  #   nodes:
  #     node-1: { }
#     node-2: { }

spot_nodepools:
  spot-np-1-cpu:
    ami: ami-0f5994b4c9f02fea1
    ami_ssh_username: ubuntu
    # availability_zone: "us-east-1b"
    nvidia_gpu_enabled: false
    root_volume_type: gp3
    root_volume_size: 50
    spot_fleet_tagging_role_name: "aws-ec2-spot-fleet-tagging-role"
    iam_instance_profile: "ec2_s3_full"
    cpu_node:
      vcpu:
        min: 4
        max: 6
      memory_per_vcpu:
        min: 4
        max: 4
    nodes:
      node-1: { }
      node-2: { }

  spot-np-2-gpu:
    ami: ami-0c8ba594de9df35ef
    ami_ssh_username: ubuntu
    # availability_zone: "us-east-1b"
    nvidia_gpu_enabled: true
    root_volume_type: gp3
    root_volume_size: 100
    spot_fleet_tagging_role_name: "aws-ec2-spot-fleet-tagging-role"
    iam_instance_profile: "ec2_s3_full"
    gpu_node:
      instance_types: [ g4dn.xlarge ]
    nodes:
      node-1: { }
      node-2: { }
      node-3: { }

  spot-np-3-cpu:
    image_id: ami-0f5994b4c9f02fea1
    image_ssh_username: ubuntu

    nvidia_gpu_enabled: false
    root_volume_type: gp3
    root_volume_size: 50
    spot_fleet_tagging_role_name: "aws-ec2-spot-fleet-tagging-role"
    iam_instance_profile: "ec2_s3_full"
    cpu_node:
      vcpu:
        min: 8
        max: 8
      memory_per_vcpu:
        min: 4
        max: 4
    nodes:
      node-1: { }

enable_nvidia_gpu_support: true
kloudlite_params:
  release: v1.0.5-nightly
  install_crds: true
  install_csi_driver: true
  install_operators: true

save_ssh_key_to_path: .secrets/boltzmann-cluster.pem
save_kubeconfig_to_path: .secrets/boltzmann-cluster.kubeconfig
save_worker_ssh_key_to_path: .secrets/boltzmann-cluster-worker.pem

extra_agent_args: []
extra_server_args: []
